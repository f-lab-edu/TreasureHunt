pipeline {
    agent any

    stages {
        stage('git-clone') {
            steps {
                git(
                    url: "git@github.com:sanggeun-choi/android-example.git",
                    credentialsId: "android-example",
                    branch: "develop"
                )
            }
        }

        stage('build-with-gradle') {
            steps {
                sh "chmod +x gradlew"
                sh "./gradlew clean assemble" // 일반 APK 빌드
                // sh "./gradlew clean app:assembleDebug" // DEBUG APK 빌드
                // sh "./gradlew clean app:assembleRelease" // RELEASE APK 빌드
                sh "find $WORKSPACE -name '*.apk'"
            }
        }
    }
}